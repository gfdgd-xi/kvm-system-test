name: KVM VNC
run-name: ${{ github.actor }} KVM VNC 🚀
on:
#  schedule:
#    - cron: '0 3 * * *'
  workflow_dispatch:
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:

      - name: Run KVM
        env: 
          NGROK: ${{ secrets.NGROK }}
        run: |
          # 配置编译容器
          sudo apt update
          sudo apt install git qemu-system qemu-system-gui aria2 -y
          git clone https://github.com/gfdgd-xi/kvm-system-test --depth=1
          cd kvm-system-test
          chmod 777 sunny
          nohup ./sunny clientid $NGROK &
          #aria2c -x 16 -s 16 https://github.com/gfdgd-xi/deepin-community-live-cd/releases/download/2.0.0-iso/deepin-live-cd-commiunty-2.0.0-debian_amd64.iso
          #sudo modprobe kvm | true
          #kvm --vnc :1 --cdrom deepin-live-cd-commiunty-2.0.0-debian_amd64.iso -m 4G -smp 2
          sudo apt install xfce4 xfce4-terminal tigervnc-standalone-server -y
          vncserver :1
          
